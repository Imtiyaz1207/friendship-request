<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’ Friendship Request ğŸ’</title>
<style>
body {
  margin: 0;
  height: 100vh;
  font-family: "Poppins", sans-serif;
  color: white;
  text-align: center;
  cursor: pointer;
  background: radial-gradient(circle at top left, #ff9a9e, #fad0c4);
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  overflow-x: hidden;
}

/* Transition & glow */
.fade { opacity: 0; transition: opacity 0.6s ease; }
.fade.show { opacity: 1; }
.container {
  background: rgba(255,255,255,0.15);
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(255,255,255,0.3);
  display: none;
  width: 90%;
  max-width: 400px;
  flex-direction: column;
}
.names { font-size: 1.4em; font-weight: bold; color: #ffeef7; text-shadow:0 0 15px #ff8fb2; margin-bottom:15px; }
h1 { font-size: 2em; margin-bottom:10px; text-shadow:0 0 15px #fff,0 0 30px #ff8fb2; animation: glow 2s ease-in-out infinite alternate; }
p { font-size:1.1em; margin-bottom:20px; color:#fff; text-shadow:0 0 8px rgba(255,255,255,0.5); }
button { padding:10px 20px; margin:8px; border:none; border-radius:12px; font-size:0.95em; cursor:pointer; transition: all 0.3s ease; box-shadow:0 0 10px rgba(255,255,255,0.3);}
.yes-btn { background-color:#00ffa3;color:#fff;font-weight:bold;}
.yes-btn:hover { transform:scale(1.1); background-color:#00d98a;}
.no-btn { background-color:#ff4f70;color:#fff; position: relative;}
.no-btn:hover { transform:scale(1.05); background-color:#ff2e5f;}
#footer { position: fixed; bottom:10px; width:100%; text-align:center; font-size:0.9em; color:rgba(255,255,255,0.8); text-shadow:0 0 5px #fff; pointer-events:none; opacity:0; transition: opacity 0.8s ease; }
#footer.show { opacity:1; }
.heart { position:absolute; color:rgba(255, 255, 255, 0.7); font-size:20px; animation: floatUp 6s linear infinite; }
@keyframes floatUp { from{transform:translateY(100vh) scale(0.5);opacity:1;} to{transform:translateY(-10vh) scale(1.5);opacity:0;} }
@keyframes glow { from{text-shadow:0 0 5px #fff,0 0 15px #ff8fb2;} to{text-shadow:0 0 15px #fff,0 0 30px #ff6fa9;} }
input { padding:8px; border-radius:8px; border:none; font-size:1em; margin-top:8px; }
#passwordError { color:#ff4f70; display:none; margin-top:5px; }

/* ğŸŒ¸ New overlay password popup */
#pagePasswordOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: radial-gradient(circle at top left, #ffb6c1, #ff9a9e);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
  z-index: 9999;
  opacity: 1;
  transition: opacity 0.8s ease;
}
#pagePasswordOverlay.fadeOut {
  opacity: 0;
  pointer-events: none;
}
#pagePasswordOverlay input {
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-size: 1em;
  margin-top: 10px;
  width: 200px;
  text-align: center;
}
#pagePasswordOverlay button {
  margin-top: 10px;
  background: #00ffa3;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 10px;
  cursor: pointer;
}
#pagePasswordError {
  color: #ff4f70;
  margin-top: 8px;
  display: none;
}
</style>
</head>
<body>

<!-- ğŸ” Page Password Overlay -->
<div id="pagePasswordOverlay">
  <h2 id="passwordHint">Hint: two words (enter your name 5c1) in lower caseğŸ¦‹</h2>
  <input type="password" id="pagePasswordInput" placeholder="ğŸ˜ŠğŸ¦‹">
  <button onclick="verifyPagePassword()">Unlock ğŸ”“</button>
  <p id="pagePasswordError">Incorrect password! Try again.</p>
</div>

<!-- ğŸµ Background music -->
<audio id="bgMusic" src="https://github.com/Imtiyaz1207/friendship-request/raw/refs/heads/main/static/zara_sa.mp3" loop></audio>

<div id="startScreen" style="display:none;">
  <h1>ğŸ’– Tap here to Start ğŸ’–</h1>
</div>

<!-- Step 1 -->
<div class="container fade" id="step1Container">
  <div class="names">ğŸ’– From <span id="fromName">Shaik</span> ğŸ’–</div>
  <h1>Is this 5C1? ğŸŒ¸</h1>
  <button class="yes-btn" onclick="step2Show()">Yes ğŸ˜Š</button>
  <button class="no-btn" id="noBtnStep1" onmouseover="moveButton(this)">No ğŸ™ˆ</button>
</div>

<!-- Step 2 -->
<div class="container fade" id="step2Container">
  <div class="names">ğŸ’– From <span id="fromName2">A stranger who feels youâ€™re something special â¤</span> to <span id="toName">5C1ğŸ¦‹</span> ğŸ’–</div>
  <h1>Will You Be My Friend?</h1>
  <p>Because life is better with a friend like you ğŸŒ¸</p>
  <button class="yes-btn" onclick="showSmileMessageStep()">Yes ğŸ˜Š</button>
  <button class="no-btn" id="noBtn2" onmouseover="moveButton(this)">No ğŸ™ˆ</button>
</div>

<!-- Step 3a â€” Smile Message -->
<div class="container fade" id="smileMessageContainer">
  <h1 id="smileMessageText"style="font-size:1.5em;">Yay! ğŸ‰ 5C1ğŸ¦‹, you just made Shaik's heart smile ğŸ’•ğŸ˜„</h1>
  <button class="yes-btn" onclick="showPasswordStep()">Continue ğŸ’«</button>
</div>

<!-- Step 3b â€” Password input -->
<div class="container fade" id="passwordContainer">
  <p>Enter the full code to continue (hint: 23e51):</p>
  <input type="text" id="secretCode" placeholder="Enter remaining code">
  <div style="margin-top:10px; display:flex; justify-content:center; gap:10px;">
    <button class="yes-btn" onclick="checkPassword()">Submit âœ…</button>
  </div>
  <p id="passwordError">Incorrect code! Try again.</p>
</div>

<!-- Step 3c â€” Instagram Reel -->
<div class="container fade" id="smileContainer">
 <h1 style="font-size:1.0em; position:absolute; top:250px; right:20px;" id="smileMessage">Here's the reelâ€”it will make you smile! ğŸ˜„</h1>
  <div id="smileVideoContainer" style="display:none; margin-top:15px;">
    <blockquote class="instagram-media"
      data-instgrm-permalink="https://www.instagram.com/reel/DPo9-tGiIhP/?igsh=MWR0djMyYzQ5dG9pbQ=="
      data-instgrm-version="14"
      style="background:#FFF; border:0; margin:1000px auto; max-width:540px; min-width:326px; width:99%;"></blockquote>
  </div>

<div id="footer">Built with â¤ï¸ by Shaik07</div>

<script>
// ===== Logging helper =====
function logAction(eventName) {
  fetch("/log_action", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ event: eventName })
  }).catch(err => console.log("Log error:", err));
}

// ===== ğŸ” Page Password Check =====
const overlay = document.getElementById("pagePasswordOverlay");
const startScreen = document.getElementById("startScreen");

function verifyPagePassword(){
  const correct = "muskan fatima";
  const input = document.getElementById("pagePasswordInput").value.trim();

  // ğŸŸ¢ Add this line
  logAction("overlay_password_attempt:" + input);

  if(input === correct){
    overlay.classList.add("fadeOut");
    setTimeout(()=>{ overlay.style.display = "none"; startScreen.style.display = "flex"; }, 800);
    logAction("overlay_password_correct");
  } else {
    document.getElementById("pagePasswordError").style.display = "block";
    logAction("overlay_password_incorrect");
  }
}


// ===== Main Friendship Flow =====
const audio = document.getElementById("bgMusic");
audio.preload = "auto";
audio.loop = true;

startScreen.addEventListener("click", () => {
  startScreen.style.display = "none";
  showStep("step1Container");
  audio.currentTime = 0;
  audio.muted = false;
  const playPromise = audio.play();
  if(playPromise) playPromise.catch(()=>console.log("Audio blocked"));
  document.getElementById("footer").classList.add("show");
  logAction("start_screen_click");
});

function showStep(stepId){
  document.querySelectorAll(".container").forEach(c=>c.style.display="none");
  const step = document.getElementById(stepId);
  step.style.display="flex";
  setTimeout(()=>step.classList.add("show"),50);
}

function step2Show(){ showStep("step2Container"); logAction("step1_yes_click"); }
function showSmileMessageStep(){ showStep("smileMessageContainer"); document.getElementById("footer").classList.add("show"); logAction("step2_yes_click"); }
function showPasswordStep(){ showStep("passwordContainer"); logAction("smile_message_continue"); }

function checkPassword(){
  const userInput = document.getElementById("secretCode").value.trim();
  const correctCode = "23e51a05c1";
  logAction("password_attempt:" + userInput);
  if(userInput === correctCode){
    logAction("password_correct");
    document.getElementById("passwordContainer").style.display="none";
    showStep("smileContainer");
    document.getElementById("smileVideoContainer").style.display="block";
    audio.pause(); audio.currentTime=0; logAction("music_stop");
    if(window.instgrm) window.instgrm.Embeds.process();
  }else{
    document.getElementById("passwordError").style.display="block";
    logAction("password_incorrect");
  }
}

function moveButton(btn){
  const x=Math.random()*(window.innerWidth-btn.offsetWidth);
  const y=Math.random()*(window.innerHeight-btn.offsetHeight);
  btn.style.position="absolute"; btn.style.left=x+"px"; btn.style.top=y+"px";
  logAction("no_button_hover");
}

setInterval(()=>{
  const heart=document.createElement("div");
  heart.className="heart"; 
  heart.style.left=Math.random()*100+"vw"; 
  heart.style.fontSize=Math.random()*20+10+"px"; 
  heart.innerText="ğŸ’–";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),6000);
},500);
</script>
<script async src="//www.instagram.com/embed.js"></script>
</body>
</html>
